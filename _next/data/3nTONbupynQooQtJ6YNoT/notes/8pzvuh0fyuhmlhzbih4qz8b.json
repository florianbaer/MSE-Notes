{"pageProps":{"note":{"id":"8pzvuh0fyuhmlhzbih4qz8b","title":"Key-Value Stores","desc":"","updated":1646834395729,"created":1646829588641,"custom":{},"fname":"mse.ss22.datamgmt.keyvaluestores","type":"note","vault":{"fsPath":"vault"},"contentHash":"f77d3b0164ce63f4e287552c31e956dd","links":[{"type":"wiki","from":{"fname":"mse.ss22.datamgmt.keyvaluestores","id":"8pzvuh0fyuhmlhzbih4qz8b","vaultName":"vault"},"value":"mse.ss22.sw03","alias":"mse.ss22.sw03","position":{"start":{"line":2,"column":1,"offset":19},"end":{"line":2,"column":18,"offset":36},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"mse.ss22.sw03"}}],"anchors":{"key-value-stores":{"type":"header","text":"Key value stores","value":"key-value-stores","line":7,"column":0,"depth":1},"postgis":{"type":"header","text":"PostGIS","value":"postgis","line":50,"column":0,"depth":1},"tree":{"type":"header","text":"Tree","value":"tree","line":58,"column":0,"depth":1},"json":{"type":"header","text":"JSON","value":"json","line":76,"column":0,"depth":1}},"children":[],"parent":"7inibpeeygbmh6bkxn4k53o","data":{},"schema":{"schemaId":"cbozegiz56e4jt9d0kqkvrd","moduleId":"mse"}},"body":"<h1 id=\"key-value-stores\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#key-value-stores\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Key-Value Stores</h1>\n<h1 id=\"key-value-stores-1\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#key-value-stores-1\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Key value stores</h1>\n<p><a href=\"/MSE-Notes/notes/1yfdsj6hlbkmez4crwxt09b\">Sw03</a></p>\n<p>One way of usig it in postgres is <code>hstore</code></p>\n<pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">--enable exteinos</span>\n<span class=\"token keyword\">create</span> extension hstore\n\n<span class=\"token comment\">-- delete extension </span>\n<span class=\"token keyword\">drop</span> extension hstore\n\n<span class=\"token comment\">-- usage</span>\n<span class=\"token keyword\">select</span> <span class=\"token string\">'a=>x, b=>y'</span>::hstore <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token string\">'a'</span> <span class=\"token comment\">-- is an extension delivered with postgres-contrib</span>\n</code></pre>\n<p>Dictionary is an abstract data structure which contains a value or several values.</p>\n<p>Key values pairs are used to make a schema-less / schema-later / open schema model.</p>\n<ul>\n<li><strong>Possibly suitable for</strong>\n<ul>\n<li>Easy data storage and data capture</li>\n<li>Rows with many attributes that are rarely examined</li>\n<li>Semi-structured data</li>\n</ul>\n</li>\n<li><strong>Tips</strong>\n<ul>\n<li>Try to avoid reporting against big heaps of Dictionaries</li>\n<li>Consider additional attributes with lookup keys (see Free Text Search)</li>\n<li>Consider running triggers or a post-process to transform KVPs into an entity-based schema.</li>\n</ul>\n</li>\n</ul>\n<pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> <span class=\"token string\">'a => 1, a=>2'</span>::hstore<span class=\"token punctuation\">;</span> <span class=\"token comment\">-- only saves the first occurance </span>\n<span class=\"token comment\">-- \"a\" => \"1\", so value 2 is ignored</span>\n\n<span class=\"token keyword\">select</span> akeys<span class=\"token punctuation\">(</span><span class=\"token string\">'key3=>3, key2=>2'</span>::hstore<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">-- [key3, key2]</span>\n\n<span class=\"token keyword\">select</span> <span class=\"token number\">1</span> <span class=\"token keyword\">as</span> id<span class=\"token punctuation\">,</span> each<span class=\"token punctuation\">(</span><span class=\"token string\">'key3=>3, key2=>2'</span>::hstore<span class=\"token punctuation\">)</span> <span class=\"token comment\">-- returns tuples</span>\n\n<span class=\"token keyword\">select</span> each<span class=\"token punctuation\">(</span>kykvpfield<span class=\"token punctuation\">)</span> <span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token comment\">-- returns all kvp as tuples</span>\n</code></pre>\n<h1 id=\"postgis\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#postgis\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>PostGIS</h1>\n<pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> <span class=\"token operator\">*</span><span class=\"token punctuation\">,</span> tags<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token string\">'tourism'</span> <span class=\"token keyword\">as</span> featureclass\n<span class=\"token keyword\">from</span> osm_location <span class=\"token keyword\">where</span> tags<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token string\">'tourism'</span> <span class=\"token operator\">in</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'camp_site'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'caravan_site'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">-- find camping sites on https://terminal.osmdatapipeline.geoh.infs.ch/</span>\n</code></pre>\n<h1 id=\"tree\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#tree\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Tree</h1>\n<p>A tree is a graph without cycles</p>\n<ul>\n<li>Parent / Child / Ancestor Nodes</li>\n<li>Sibling Nodes</li>\n<li>Root Node: Only Node which does’nt have a parent</li>\n<li>Leaf Node: Node which has no child</li>\n<li>Internal Node: Node which is neither the root nor the leaf node</li>\n<li>Level of a Node (depth)</li>\n<li>Degree of a Node: No. of children a node has</li>\n<li>Height of Tree: Max. level of nodes in that tree</li>\n<li>Subtree of a Tree</li>\n</ul>\n<p><strong>Postgres even has Ltree</strong></p>\n<p><img src=\"/MSE-Notes/assets/images/2022-03-09-14-44-39.png\" alt=\"Tree Data Structures\"></p>\n<h1 id=\"json\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#json\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>JSON</h1>\n<p>PostgreSQL knows JSON and JSONB</p>\n<ul>\n<li>JSON: Textual storage «as is», multiple keys</li>\n<li>JSONB: Internal binary, one key, indexable</li>\n</ul>\n<p><strong>use jsonb_pretty() for printing</strong></p>\n<p>Accessors: ->, ->> #>, #>>\nProcessing: @></p>\n<pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> <span class=\"token string\">'{\"a\":1, \"b\":2, \"c\":3}'</span>::jsonb @<span class=\"token operator\">></span> <span class=\"token string\">'{\"c\":3, \"b\":2}'</span>::jsonb\n<span class=\"token comment\">-- returns ture</span>\n</code></pre>","noteIndex":{"id":"ofsa5s7zh7imqa042iv23kt","title":"Root","desc":"","updated":1646324578684,"created":1646295077431,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"e57e6d83473ba1b3392e09a272ee2ff4","links":[],"anchors":{"welcome-to-dendron":{"type":"header","text":"Welcome to Dendron","value":"welcome-to-dendron","line":7,"column":0,"depth":1},"lookup":{"type":"header","text":"Lookup","value":"lookup","line":11,"column":0,"depth":2}},"children":["dzkel6khq6cnvj7ie210453","vrc7o3pbnmcqgfwbbxyx8em"],"parent":null,"data":{},"body":"# Welcome to Dendron\n\nThis is the root of your dendron vault. If you decide to publish your entire vault, this will be your landing page. You are free to customize any part of this page except the frontmatter on top.\n\n## Lookup\n\nThis section contains useful links to related resources.\n\n- [Getting Started Guide](https://link.dendron.so/6b25)\n- [Discord](https://link.dendron.so/6b23)\n- [Home Page](https://wiki.dendron.so/)\n- [Github](https://link.dendron.so/6b24)\n- [Developer Docs](https://docs.dendron.so/)\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{}},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"graph":{"zoomSpeed":1},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"seeds":{}},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","assetsPrefix":"/MSE-Notes","siteUrl":"https://florianbaer.github.io","seo":{"title":"Dendron","description":"MSE Notes by Florian Bär"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enablePrettyLinks":true,"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}